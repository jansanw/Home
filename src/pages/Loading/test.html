<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <script type="text/javascript">
    var LoadingHtml = '<div class="wrapper progress_out" id="loadingDiv" style="position:relative;">'+
      '<div class="progress_box" style="position:fixed;left:50%;margin-left:-43%;top:50%;margin-top:-20px;z-index:999;">'+
      '<div class="progress_inbox">'+
      '<div class="progress_bar" id="bar" style="width: 0%"></div>'+
      '<label id="total">0%</label>'+
      '</div>'+
      '</div>'+
      '</div>';
    document.write(LoadingHtml);
    document.onreadystatechange = completeLoading;
    //加载状态为complete时移除loading效果
    function completeLoading() {
      if (document.readyState == "complete") {
        setTimeout(function () {
          var loadingMask = document.getElementById('loadingDiv');
          loadingMask.parentNode.removeChild(loadingMask);
        },100)

      }


    }
    function run(){
      var bar = document.getElementById("bar");
      var total = document.getElementById("total");
      if((bar!=null) && bar.style.width == "99%"){
        window.clearTimeout(timeout);
        return;
      }
      if((bar!=null) && document.readyState == "complete"){
        bar.style.width = "100%";
        total.innerHTML = bar.style.width;
        total.style.position = 'absolute';
        total.style.left = bar.style.width;
        total.style.top = '0';
      }else if((bar!=null)){
        bar.style.width=parseInt(bar.style.width) + 1 + "%";
        total.innerHTML = bar.style.width;
        total.style.position = 'absolute';
        total.style.left = bar.style.width;
        total.style.top = '0';
      }

      timeout=window.setTimeout("run()",100);
    }
    run();
    <!--加载条end -->
  </script>
</head>
<body>

</body>
</html>
